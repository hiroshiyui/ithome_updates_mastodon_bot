/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package ithome_updates_mastodon_bot

import org.w3c.dom.Node
import java.util.logging.Logger

class App {
    val logger: Logger = Logger.getLogger(this.javaClass.name)
    val greeting: String
        get() {
            return "Hello World!"
        }
}

fun main() {
    val logger: Logger = App().logger
    logger.info("Starting ithome_updates_mastodon_bot...")

    println(App().greeting)

    val rssFeeds = RssFeeds("https://www.ithome.com.tw/rss")
    println(rssFeeds.source())
    logger.info("RSS feeds '${rssFeeds.title()}' has ${rssFeeds.items().length} items.")

    repeat(rssFeeds.items().length) { entry ->
        val itemNode: Node = rssFeeds.items().item(entry)
        val item = RssFeedsItem(itemNode)
        println("---")
        println(item.title())
        println(item.description())
        println(item.link())
    }
}
